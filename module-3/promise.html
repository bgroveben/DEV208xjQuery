<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8" />
    <title>jQuery Promises</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" />
    <style>
      body {
        font-size: 18px;
      }
      div {
        margin-top: 1em;
      }
      .noPromise {
        height: 5em;
        width: 5em;
        background-color: red;
        color: white;
      }
      .promise {
        height: 5em;
        width: 5em;
        background-color: blue;
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h4>A <strong>promise</strong> is an object returned by functions in jQuery that take a long or variable amount of time. By using a promise, you can ensure that your code executes whenever the operation completes, be notified of its success or failure, or maybe receive updates on an object's progress.</h4>

      <h4>Notice that the line below changes before the square has disappeared. The code is executing asynchronously, but what if we don't want the text to change until the box has finished disappearing?</h4>

      <div id="outputNoPromise">Click button to run script WITHOUT promise.</div>
      <div>
        <button type="button" class="btn" id="noPromise">Run script WITHOUT promise</button>
      </div>
      <div class="noPromise">Sample Content</div>
      <div>
        <h4>When we use a promise, the text below will not change until the box has disappeared completely.</h4>
      </div>
      <div id="outputPromise">Click button to run script WITH promise.</div>
      <div>
        <button type="button" class="btn" id="promise">Run script WITH promise</button>
      </div>
      <div class="promise">Sample Content</div>

    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.4.min.js"></script>

    <script>
      $(function() {
        $('#noPromise').click(function() {
          $('.noPromise').hide(1000);
          $('#outputNoPromise').text('Box is now hidden!');
        });
        $('#promise').click(function() {
          $('.promise').hide(1000).promise().done(function() {
            $('#outputPromise').text('Box is now hidden!')
          });
        });
      });
    </script>
  </body>
</html>
