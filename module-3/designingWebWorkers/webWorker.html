<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8" />
    <title>Designing Your Web Workers</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" />
    <style>
      body {
        font-size: 24px;
        font-family: Verdana;
      }
      div {
        margin-top: 1em;
        margin-bottom: .3em;
      }
      .btn {
        font-size: 1em;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h4>This Web Worker Demo will not run in recent versions of Google Chrome unless you adjust some security settings. See <a href="http://www.html5rocks.com/en/tutorials/workers/basics/#toc-security" target="_blank">this section</a> from "The Basics of Web Workers" by Eric Bidelman for more information. Or use another browser.

      <h4>Web workers don't provide a built-in structure for handling common events, such as start and stop. However, the worker's simple messaging system allows you to easily build your workers to perform the operations that you need, and add your own system for managing start and stop events.</h4>

      <h4>In the JavaScript file, I have <em>created</em> a web worker that accepts status messages.</h4>
      <h4>In the HTML file, I have <em>called</em> a web worker that accepts status messages.</h4>

      <h4>Open your dev tools and check out what's going on in the script tags. The web worker for this exercise has already done its thing.</h4>

      <ul id="output">

      </ul>
    </div>

    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.4.min.js"></script>

    <script>
      var worker = new Worker('webWorker.js');

      worker.addEventListener('message', function(event) {
        if (event.data ==='STARTED') {
          $('#output').append('<div>Worker started</div>');
        } else if (event.data === 'STOPPED') {
          $('#output').append('<div>Worker stopped</div>');
        } else {
          $('#output').append('<div>' + event.data + '</div>');
        }
      });
      worker.postMessage('START');
      worker.postMessage('sample data');
      worker.postMessage('STOP');
    </script>
  </body>
</html>
